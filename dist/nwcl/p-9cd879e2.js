import{a as e,f as t}from"./p-a84c2a87.js";const o=e=>!("isConnected"in e)||e.isConnected,n=(()=>{let e;return(...t)=>{e&&clearTimeout(e),e=setTimeout(()=>{e=0,(e=>{for(let t of e.keys())e.set(t,e.get(t).filter(o))})(...t)},2e3)}})(),s=(()=>{const o=((e,t=((e,t)=>e!==t))=>{let o=new Map(Object.entries(null!=e?e:{}));const n={dispose:[],get:[],set:[],reset:[]},s=()=>{o=new Map(Object.entries(null!=e?e:{})),n.reset.forEach(e=>e())},r=e=>(n.get.forEach(t=>t(e)),o.get(e)),c=(e,s)=>{const r=o.get(e);t(s,r,e)&&(o.set(e,s),n.set.forEach(t=>t(e,s,r)))},a="undefined"==typeof Proxy?{}:new Proxy(e,{get:(e,t)=>r(t),ownKeys:()=>Array.from(o.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(e,t)=>o.has(t),set:(e,t,o)=>(c(t,o),!0)}),u=(e,t)=>(n[e].push(t),()=>{((e,t)=>{const o=e.indexOf(t);o>=0&&(e[o]=e[e.length-1],e.length--)})(n[e],t)});return{state:a,get:r,set:c,on:u,onChange:(t,o)=>{const n=u("set",(e,n)=>{e===t&&o(n)}),s=u("reset",()=>o(e[t]));return()=>{n(),s()}},use:(...e)=>e.forEach(e=>{e.set&&u("set",e.set),e.get&&u("get",e.get),e.reset&&u("reset",e.reset)}),dispose:()=>{n.dispose.forEach(e=>e()),s()},reset:s,forceUpdate:e=>{const t=o.get(e);n.set.forEach(o=>o(e,t,t))}}})({theme:localStorage.getItem("currentTheme")?localStorage.getItem("currentTheme"):"default"},void 0);return(({on:o})=>{const s=new Map;"function"==typeof e&&(o("dispose",()=>{s.clear()}),o("get",t=>{const o=e();o&&((e,t,o)=>{const n=e.get(t);n?n.includes(o)||n.push(o):e.set(t,[o])})(s,t,o)}),o("set",e=>{const o=s.get(e);o&&s.set(e,o.filter(t)),n(s)}),o("reset",()=>{s.forEach(e=>e.forEach(t)),n(s)}))})(o),o})();s.onChange("theme",async()=>{localStorage.setItem("currentTheme",s.get("theme")),window.localStorage.setItem("currentTheme",s.get("theme"))});const r=s.onChange,c=s;export{r as o,c as s}