import{r as t,c as i,h as s,g as e}from"./p-a84c2a87.js";import{o as h,s as n}from"./p-9cd879e2.js";import{a as o}from"./p-8ca4eb56.js";const a=class{constructor(s){t(this,s),this.swipe=i(this,"swipe",7),this.position="bottom",this.backdropEl=void 0,this.hasBackdrop=!1,this.allowedTouch=!1,this.isSwiping=!1,this.availableAnchors=[25,50,75,100],this.windowAnchors=4,this.windowAnchorHeight=0,this.minHeightAvailable="0",this.animationDuration=250,this.eventStart="mousedown",this.eventMove="mousemove",this.eventEnd="mouseup",this._moveSwipingHandler=void 0,this._endSwipingHandler=void 0,this.eventOptions={passive:!1},this.classNames={EL:"sheet",WRAPPER:"__wrapper",BAR:"__bar",HEADER:"__header",CONTENT:"__content",FOOTER:"__footer",ON_TOP:"--on-top",ON_BOTTOM:"--on-bottom",IS_SWIPING:"--is-swiping",BACKDROP:"__backdrop",FADE_IN:"fade-in",OPEN:"--open"}}async open(t,i=!0){const s=parseInt(t,10);let e=0,h=this.minHeightAvailable;this.availableAnchors.includes(s)&&(e=(100-s)/(100/this.windowAnchors)),"content"!==this.moveTo&&(h="0",this.steps&&this.steps.length>0&&0===e?h=Math.min(...this.steps)+"%":e<this.windowAnchors&&(h=100-(100-e*(100/this.windowAnchors))+"%")),this.setIndexSheet(),this.setPositionClasses(h),setTimeout(()=>{this.createBackdrop()},1),i?o({targets:this.sheet,top:h,duration:this.animationDuration,easing:"easeInOutSine"}):this.sheet.style.top=h}handleTheme(){const t=t=>{Array.from(this.el.classList).filter(t=>t.startsWith("theme--")).forEach(t=>{this.el.classList.remove(t)}),this.el.classList.add("theme--"+t)};h("theme",()=>{t(n.get("theme"))}),t(n.get("theme"))}componentDidLoad(){if(this.handleTheme(),this.el.setAttribute("name",this.classNames.EL),this.el.classList.add(""+this.classNames.EL),"content"===this.moveTo&&this.el.classList.add(this.classNames.EL+"--fit-content"),this.steps&&this.steps.length>0){this.windowAnchors=this.steps.length;const t=Math.min(...this.steps);this.minHeightAvailable=100-t+"%",0===t&&(this.windowAnchors-=1)}this.initComponentConstants(),this.initComponentEvents()}componentWillLoad(){this.hasHeaderSlot=!!this.el.querySelector(`[slot="${this.classNames.EL}${this.classNames.HEADER}"]`),this.hasFooterSlot=!!this.el.querySelector(`[slot="${this.classNames.EL}${this.classNames.FOOTER}"]`),this.hasHeaderSlot&&this.el.querySelector(`[slot="${this.classNames.EL}${this.classNames.HEADER}"]`).classList.add(`${this.classNames.EL}${this.classNames.HEADER}`),this.hasFooterSlot&&this.el.querySelector(`[slot="${this.classNames.EL}${this.classNames.FOOTER}"]`).classList.add(`${this.classNames.EL}${this.classNames.FOOTER}`)}createBackdrop(){if(!this.hasBackdrop&&this.backdrop){this.hasBackdrop=!0;const t=document.createElement("div");t.className=`${this.classNames.EL}${this.classNames.BACKDROP}`,this.el.appendChild(t),this.backdropEl=this.el.querySelector(`.${this.classNames.EL}${this.classNames.BACKDROP}`),setTimeout(()=>{this.backdropEl.classList.add(""+this.classNames.FADE_IN)},1)}}deleteBackdrop(){this.backdrop&&(this.backdropEl.classList.remove(""+this.classNames.FADE_IN),setTimeout(()=>{this.backdropEl&&(this.el.removeChild(this.backdropEl),this.backdropEl=void 0,this.hasBackdrop=!1)},this.animationDuration))}initComponentConstants(){this.sheet=this.el,this.sheetBar=this.el.querySelector(`.${this.classNames.EL}${this.classNames.BAR}`);const t=window.innerHeight,i=this.sheet.scrollHeight,s=i>t?t:i;switch(this.moveTo){case"content":this.windowAnchors=1,this.windowAnchorHeight=s,this.minHeightAvailable="calc(100% - "+s+"px )",this.sheet.style.height=s+"px";break;default:this.windowAnchorHeight=t/this.windowAnchors}this.sheet.style.top="100%",this.sheet.classList.add(`${this.classNames.EL}${this.classNames.ON_BOTTOM}`)}initComponentEvents(){this.allowedTouch="ontouchstart"in window,this.allowedTouch&&(this.eventStart="touchstart",this.eventMove="touchmove",this.eventEnd="touchend"),this.sheetBar.addEventListener(this.eventStart,t=>this.startSwiping(t),this.eventOptions)}startSwiping(t){const i=t.touches?t.touches[0].clientY:t.clientY;t.preventDefault(),this.killEventListener(),t.target.className===`${this.classNames.EL}${this.classNames.BAR}`&&(this.isSwiping=!0,this.pointerPosition=Math.round(i),this.componentPosition=-1*this.sheet.offsetTop,this.sheet.classList.remove(`${this.classNames.EL}${this.classNames.ON_BOTTOM}`),this.createBackdrop(),document.addEventListener(this.eventMove,this._moveSwipingHandler=t=>this.moveSwiping(t),this.eventOptions),document.addEventListener(this.eventEnd,this._endSwipingHandler=t=>this.endSwiping(t),this.eventOptions))}moveSwiping(t){const i=t.touches?t.touches[0].clientY:t.clientY;this.sheet.classList.add(`${this.classNames.EL}${this.classNames.IS_SWIPING}`),t.preventDefault(),this.isSwiping&&(this.swipePosition=Math.round(i)-this.pointerPosition,this.sheet.style.top=this.swipePosition-this.componentPosition+"px")}endSwiping(t){t.preventDefault(),this.isSwiping=!1,this.sheet.classList.remove(`${this.classNames.EL}${this.classNames.IS_SWIPING}`);const i=this.pointerPosition+this.swipePosition,s=this.swipePosition>0?"bottom":"top";let e="100%";if(i<0||"top"===s&&1===this.windowAnchors)e=this.steps&&this.steps.length>0?"0":this.minHeightAvailable;else if(i>window.innerHeight||"bottom"===s&&1===this.windowAnchors)e=this.steps&&this.steps.length>0?this.minHeightAvailable:"100%";else{let t=0,h=t;for(;t<=this.windowAnchors;)i>=t*this.windowAnchorHeight&&i<=(t+1)*this.windowAnchorHeight&&(h="bottom"===s?t+1:t),t++;e="bottom"===s&&h===this.windowAnchors?this.steps&&this.steps.length>0?this.minHeightAvailable:"100%":"top"===s&&0===h?this.steps&&this.steps.length>0?"0":this.minHeightAvailable:100-(100-h*(100/this.windowAnchors))+"%"}this.setPositionClasses(e),this.sheet.style.top=e,this.killEventListener()}killEventListener(){document.removeEventListener(this.eventMove,this._moveSwipingHandler,this.eventOptions),document.removeEventListener(this.eventEnd,this._endSwipingHandler,this.eventOptions),this._moveSwipingHandler=void 0,this._endSwipingHandler=void 0}setPositionClasses(t){const i=parseInt(t,10);switch(i){case 100:this.sheet.classList.add(`${this.classNames.EL}${this.classNames.ON_BOTTOM}`),this.sheet.classList.remove(`${this.classNames.EL}${this.classNames.ON_TOP}`),this.el.classList.remove(`${this.classNames.EL}${this.classNames.OPEN}`),this.removeIndexSheet(),this.deleteBackdrop();break;case 0:case parseInt(this.minHeightAvailable,10):0===i?this.sheet.classList.add(`${this.classNames.EL}${this.classNames.ON_TOP}`):this.sheet.classList.remove(`${this.classNames.EL}${this.classNames.ON_TOP}`),this.sheet.classList.remove(`${this.classNames.EL}${this.classNames.ON_BOTTOM}`),this.el.classList.add(`${this.classNames.EL}${this.classNames.OPEN}`),document.body.classList.add(`${this.classNames.EL}${this.classNames.OPEN}`);break;default:this.sheet.classList.remove(`${this.classNames.EL}${this.classNames.ON_TOP}`),this.sheet.classList.remove(`${this.classNames.EL}${this.classNames.ON_BOTTOM}`),this.el.classList.add(`${this.classNames.EL}${this.classNames.OPEN}`),document.body.classList.add(`${this.classNames.EL}${this.classNames.OPEN}`)}this.swipe.emit(i)}setIndexSheet(){const t=document.querySelectorAll(`.${this.classNames.EL}${this.classNames.OPEN}[name="${this.classNames.EL}"]`);this.defaultZindex=parseInt(window.getComputedStyle(this.el).getPropertyValue("z-index"),10),t.length>0&&(this.el.style.zIndex=this.defaultZindex+t.length)}removeIndexSheet(){this.el.style.zIndex=this.defaultZindex,document.querySelectorAll(`.${this.classNames.EL}${this.classNames.OPEN}[name="${this.classNames.EL}"]`).length<=0&&document.body.classList.remove(`${this.classNames.EL}${this.classNames.OPEN}`)}render(){return[s("div",{class:`${this.classNames.EL}${this.classNames.BAR}`}),s("div",{class:`${this.classNames.EL}${this.classNames.WRAPPER}`},this.hasHeaderSlot?s("slot",{name:`${this.classNames.EL}${this.classNames.HEADER}`}):"",s("div",{class:`${this.classNames.EL}${this.classNames.CONTENT}`},s("slot",null),this.hasFooterSlot?s("slot",{name:`${this.classNames.EL}${this.classNames.FOOTER}`}):""))]}get el(){return e(this)}};a.style='body.sheet--open{overflow:hidden}[name=sheet]{position:fixed;left:0;right:0;top:100%;z-index:6000;display:block;width:100%;height:100%;transition:all 0.1s ease}[name=sheet]:after{position:absolute;left:0;right:0;top:100%;z-index:2;display:none;width:100%;height:100vh;content:""}[name=sheet].sheet--open:after{display:block}[name=sheet].sheet--on-top .sheet__content{overflow:scroll;pointer-events:inherit}[name=sheet].sheet--on-bottom{background-color:transparent}[name=sheet].sheet--on-bottom .sheet__bar{opacity:0;visibility:hidden}[name=sheet].sheet--on-bottom .sheet__content{opacity:0;visibility:hidden}[name=sheet].sheet--fit-content{height:auto}[name=sheet].sheet--is-swiping{transition:none}[name=sheet].sheet--is-swiping:after{display:block}[name=sheet].sheet--is-swiping .sheet__content{height:100vh !important}[name=sheet] .sheet__bar{position:absolute;left:0;right:0;top:0;z-index:3;width:100%;opacity:1;visibility:visible;transition:all 0.1s ease;cursor:pointer}[name=sheet] .sheet__bar:before{position:absolute;left:0;right:0;top:0;border:none;content:"";outline:none}[name=sheet] .sheet__wrapper{position:relative;z-index:2;display:flex;flex-direction:column;width:100%;height:100%}[name=sheet] .sheet__content{height:100%;overflow:hidden;pointer-events:none;opacity:1;visibility:visible;transition:all 0.1s ease;-ms-scroll-chaining:none;overscroll-behavior:none;-webkit-overflow-scrolling:touch}[name=sheet] .sheet__backdrop{position:fixed;left:0;top:0;z-index:1;width:100vw;height:100vh;opacity:0;transition:opacity 0.1s linear}[name=sheet] .sheet__backdrop.fade-in{opacity:0.5}@media (min-width : 1440px){[name=sheet] .sheet__header{padding-left:16px;padding-right:16px;padding-top:0;padding-bottom:0}[name=sheet] .sheet__content{padding-left:16px;padding-right:16px;padding-top:0;padding-bottom:0}}@media (max-width : 1439px){[name=sheet] .sheet__header{padding-left:16px;padding-right:16px;padding-top:0;padding-bottom:0}[name=sheet] .sheet__content{padding-left:16px;padding-right:16px;padding-top:0;padding-bottom:0}}@media (max-width : 1151px){[name=sheet] .sheet__header{padding-left:16px;padding-right:16px;padding-top:0;padding-bottom:0}[name=sheet] .sheet__content{padding-left:16px;padding-right:16px;padding-top:0;padding-bottom:0}}@media (max-width : 863px){[name=sheet] .sheet__header{padding-left:12px;padding-right:12px;padding-top:0;padding-bottom:0}[name=sheet] .sheet__content{padding-left:12px;padding-right:12px;padding-top:0;padding-bottom:0}}@media (max-width : 639px){[name=sheet] .sheet__header{padding-left:24px;padding-right:24px;padding-top:0;padding-bottom:0}[name=sheet] .sheet__content{padding-left:24px;padding-right:24px;padding-top:0;padding-bottom:0}}@media (max-width : 320px){[name=sheet] .sheet__header{padding-left:24px;padding-right:24px;padding-top:0;padding-bottom:0}[name=sheet] .sheet__content{padding-left:24px;padding-right:24px;padding-top:0;padding-bottom:0}}[name=sheet].sheet{border-radius:24px 24px 0 0}[name=sheet].sheet .sheet__bar{height:4px;border-radius:24px 24px 0 0}[name=sheet].sheet .sheet__bar:before{width:64px;height:4px;margin:14px auto 16px;border-radius:2px}[name=sheet].sheet .sheet__wrapper{padding:32px 0 0 0}[name=sheet].sheet:after{background-color:#FFFFFF}[name=sheet].sheet .sheet__bar{background-color:#FFFFFF}[name=sheet].sheet .sheet__bar:before{background-color:#5A8D00}[name=sheet].sheet .sheet__wrapper{background-color:#FFFFFF}[name=sheet].sheet .sheet__backdrop{background-color:#5E5E5E}';export{a as eds_bottom_sheet}